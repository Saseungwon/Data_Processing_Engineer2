## 📚 CHAPTER1 데이터베이스 기본 

### ✍ 트랜잭션

#### 1. 트랜잭션 개념
데이터베이스 시스템에서 하나의 논리적 기능을 정상적으로 수행하기 위한 작업의 기본 단위 

#### 2. 트랜잭션 특성 (ACID / 원일격영)
- 원자성(Atomicity)
  - 연산전체가 성공 또는 실패
  - 하나 실패하면 전체 취소
  - Commit/Rollback, 회복성 보장
- 일관성(Consistency)
- 격리성(Isolation)
- 영속성(Durability)

#### 3. 트랜잭션의 상태 변화 (활부완실철)
- 활동 상태
- 부분완료 상태
- 완료 상태
- 실패 상태
- 철회 상태

#### 4. 트랜잭션 제어 (커롤체)
- 트랜잭션 제어 언어 (TCL)
  - 커밋
  - 롤백 : 트랜잭션 내역을 저장 무효화 시키는 명령어 
  - 체크포인트


#### 5. 병행 제어

(1) 병행 제어 개념
- 다수 사용자 환경에서 여러 트랜잭션 수행 시, 데이터베이스 일관성 유지를 위해 상호작용을 제어하는 기법 

(2) 병행 제어 미보장 시 문제점 **(갱현모연)**
- 갱신 손실 : 먼저 실행된 트랜잭션 결과를 나중에 실행된 트랜잭션이 덮어쓸 때 발생
- 현황 파악오류 : 트랜잭션 중간 수행 결과를 다른 트랜잭션이 참조하여 발생
- 모순성 : 두 트랜잭션이 동시에 실행되어 데이터베이스의 일관성이 결여됨
- 연쇄복귀 : 특정 트랜잭션이 처리를 취소할 경우 트랜잭션이 처리한 곳의 부분을 취소하지 못함

(3) 병행 제어 기법의 종류 **(로낙타다)**
- 로킹 
  - 같은 자원을 액세스하는 다중 트랜잭션 환경에서 DB의 일관성과 무결성을 유지하기 위해 트랜잭션의 순차적 진행을 보장하는 직렬화 기법(누가 쓰고 있으면 다음 사람은 기다려)
  - 특징 
    - 데이터베이스, 파일, 레코드 등은 로킹 단위가 될 수 있음
    - 로킹 단위가 작아지면 데이터베이스 공유도 증가 
    - 로킹 단위가 작아지면 로킹 오버헤드가 증가 
    - 한꺼번에 로킹할 수 있는 객체의 크기를 로킹 단위라고 함
- 낙관적 검증
  - 어떠한 검증도 수행하지 않고 일단 트랜잭션을 수행하고, 트랜잭션 종료 시 검증을 수행하여 데이터베이스에 반영하는 기법
- 타임 스탬프 순서
  - 트랜잭션이 실행을 시작하기 전에 타임 스탬프를 부여하여 부여된 시간에 따라 트랜잭션 작업을 수행하는 기법
- 다중버전 동시성 제어(MVCC)
  - 트랜잭션의 타임스탬프와 접근하려는 데이터의 타임스탬프를 비교하여 직렬가능성이 보장되는 적절한 버전을 선택하여 접근하도록 하는 기법 

#### 6. 데이터베이스 고립화 수준 (RRRS)
(1) 고립화 수준 개념 
고립화 수준은 다른 트랜잭션이 현재의 데이터에 대한 무결성을 해치지 않기 위해 잠금을 설정하는 정도 

(2) 고립화 수준 종류 
- Read Uncommitted : 연산중인 데이터를 다른 트랜잭션이 읽는 것을 허용
- Read Committed : 연산이 완료될 때까지 연산 대상 데이터에 대한 읽기를 제한
- Repeatable Read : 선행 트랜잭션 실행 시, 종료시까지 해당 데이터에 대한 갱신, 삭제 제한
- Serializable Read : 선행 트랜잭션이 순차적으로 읽을 때, 해당 데이터 영역 전체에 대한 접근 제한

#### 7. 회복 기법 종류 (회로체크)
- 로그 기반 회복 기법 
  - 지연 갱신 회복 기법 : 완료되기 전까지 데이터베이스에 기록하지 않는 기법
  - 즉각 갱신 회복 기법 : 수행 중 갱신 결과를 바로 DB에 반영
- 체크 포인트 회복 기법 
  - 검사점 이후에 처리된 트랜잭션에 대해서만 장애 발생 이전의 상태로 복원시키는 회복 기법
- 그림자 페이징 회복 기법 
  - 복제본을 생성하여 데이터베이스 장애 시 이를 이용해 복구하는 기법


### ✍ DDL
#### 1. 데이터 정의어(DDL)
#### 2. DDL의 대상 
(1) DDL 대상 **(도스테뷰인)**
- 도메인 : 원자값들의 집합 
- 스키마 : 데이터베이스의 구조, 제약조건 등의 정보를 담고 있는 기본적인 구조 
  - 외부 스키마 : 사용자 뷰 
  - 개념 스키마 
    - 데이터베이스의 전체적인 논리적 구조
    - 전체적인 뷰
    - 관계, 제약조건, 접근 권한, 무결성, 보안에 대해 정의
  - 내부 스키마 : 물리적 저장장치의 관점에서 보는 데이터베이스 구조  
- 테이블 : 데이터 저장 공간 
- 뷰 : 하나 이상의 물리 테이블에서 유도되는 가상의 테이블 
- 인덱스 : 검색을 빠르게 하기 위한 데이터 구조 

(2) 테이블 관련 용어
- 튜플 / 행 : 튜플은 릴레이션에서 같은 값을 가질 수 없음 
- 애트리뷰트 / 열 : 열의 개수를 디그리라고 함 
- 식별자 : 각각의 구분할 수 있는 논리적인 개념 
- 카디널리티 : 튜플의 개수 
- 차수 : 애트리뷰트의 개수 
- 도메인 : 하나의 애트리뷰트가 취할 수 있는 같은 타입의 원자값들의 집합 

(3) 뷰 
- 개념 : 논리 테이블이다. 
- 특징 
  - 논리적 데이터 독립성 제공 
  - 데이터 조작 연산 간소화
  - 보안 기능 제공 
  - 뷰 변경 불가 : ALTER로 변경 불가 / DROP으로 제거 후 재생성 해야됨 
  - 뷰를 통해 접근 가능한 데이터에 대한 변경 가능, But 일부 제약 존재
    - ex) 기본키에 해당하는 컬럼이 뷰에 정의되어 있지 않은 경우 INSERT 불가능
- 목적 : 하나의 뷰로 복수의 테이블을 대체, 중요 데이터 일부만을 제공할 수 있는 장단점

(4) 인덱스 
- 개념 : 데이터를 빠르게 찾을 수 있는 수단(유일해야하고, 중복이 있으면 안 됨)
- 종류 
  - 순서 인덱스 : 정렬된 순서로 생성 
  - 해시 인덱스 : 키 값으로 접근
  - 비트맵 인덱스 : 각 컬럼에 적은 개수 값이 저장된 경우 선택
  - 함수기반 인덱스 : 수식이나 함수를 적용하여 만든 인덱스
  - 단일 인덱스 : 하나의 컬럼으로만 적용
  - 결합 인덱스 : 두 개 이상의 컬럼으로 구성 
  - 클러스터드 인덱스 : 기본 키 기준으로 레코드를 묶어서 저장

- 인덱스 스캔 방식
  - 인덱스 범위 스캔 : 수직적으로 탐색한 후에 리프 블록을 필요한 범위만 스캔
  - 인덱스 전체 스캔 : 처음부터 끝까지 수평적 탐색
  - 인덱스 단일 스캔 : 수직적 탐색만 
  - 인덱스 생량 스캔 : 조건 절에 빠졌어도 인덱스를 활용하는 스캔

#### 2. DDL 명령어  7-11