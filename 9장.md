## 📚 CHAPTER1 소프트웨어 개발 보안 설계 

### ✍ 소프트웨어 개발 보안 설계 

#### 1. SW 개발 보안의 개념 
소스 코드 등에 존재하는 보안 취약점을 제거하고, 보안을 고려하여 기능을 설계 및 구현

#### 2. SW 개발 모안의 3대 요소 (기무가)
|3대 요소|설명|
|------|---|
|기밀성|정보 공개 및 노출을 차단|
|무결성|데이터의 정확성 및 완전성과 고의/악의로 변경되거나 훼손 또는 파괴되지 않음을 보장|
|가용성|원하는 서비스를 지속해서 사용할 수 있도록 보장|

#### 3. 개발 보안 용어 (자위취위)
|용어|설명|
|------|---|
|자산|조직의 데이터 또는 조직의 소유자가 가치를 부여한 대상|
|위협|악영향을 끼칠 수 있는 사건이나 행위|
|취약점|사전 조건으로 시스템의 정보 보증을 낮추는 데 사용되는 약점|
|위험|위협이 취약점을 이용하여 조직의 자산 손실 피해를 가져올 가능성|


#### 4. DoS 공격
(1) Dos 공격의 개념
시스템의 자원을 부족하게 하여 사용하지 못하게 하는 공격

(2) DoS 공격의 종류 
|공격기법|설명|
|------|---|
|SYN 플러딩|SYN 패킷만 보내 다른 사용자가 서버를 사용 불가능하게 하는 공격 <br> ACK를 발송하지 않고 계속 새로운 연결 요청을 하게 되어 서버는 자원할당을 해지하지 않고 자원만 소비하여 고갈됨|
|UDP 플러딩|대량의 UDP 패킷을 만들어 포트 번호로 전송하여 응답 메시지를 생성하게 하여 지속해서 자원을 고갈시키는 공격|
|스머프|출발지 주소를 공격 대상의 IP로 설정하여 직접 브로드캐스팅하여 마비시키는 공격|
|죽음의 핑|ICMP 패킷(Ping)을 정상적인 크기보다 아주 크게 만들어 전송하면 다수의 IP단편화가 발생하고, 재조합하는 과정에서 많은 부하가 발생하여 정상적인 서비스 불가능하게 만드는 공격|
|랜드 어택|출발지 IP와 목적지 IP를 같은 패킷 주소로 만들어 보냄으로써 수신자가 자기 자신에게 응답을 보내게 하여 시스템의 가용성을 침해하는 공격기법|
|티어 드롭|IP 패킷의 재조합 과정에서 잘못된 Fragment Offset 정보로 인해 문제를 발생하도록 만드는 DoS 공격|

#### 5. DDoS 공격
여러 대의 공격자를 분산 배치하여 동시에 특정 사이트를 공격하는 기법 

#### 6. DRDoS 공격
출발지 IP를 공격대상 IP로 위조하여 다수의 반사 서버로 요청정보를 전송, 공격 대상자는 반사 서버로부터 다량의 응답을 받아서 서비스 거부(DoS)가 되는 공격

#### 7. 애플리케이션 공격 
|공격기법|설명|
|------|---|
|HTTP GET 플러딩|과도한 Get 메시지를 이용해 웹 서버의 과부하를 유발시키는 공격|
|Slowloris|헤더의 최종 끝을 알리는 개행 문자열인 \r\n\r\n을 전송하지 않고, \r\n만 전송하여 대상 웹 서버와 연결상태를 장시간 지속시키고 연결 자원을 모두 소진시키는 서비스 거부 공격|
|RUDY|요청 헤더의 Content-Length를 비정상적으로 크게 설정하여 메시지 바디 부분을 매우 소량으로 보내 계속 연결 상태를 유지시키는 공격|
|Slow HTTP Read Dos|TCP 윈도 크기와 데이터 처리율을 감소시킨 상태에서 다수 HTTP 패킷을 지속적으로 전송하여 연결자원을 소진시키는 서비스 거부 공격|
|Hulk DoS|주소를 지속적으로 변경하면서 다량으로 GET 요청을 발생시키는 서비스 거부 공격|
|Hash DoS|조작된 많은 수의 파라미터를 POST 방식으로 웹 서버로 전달하여 다수의 해시 충돌을 발생시켜서 자원을 소모시키는 서비스 거부 공격|

#### 8. 네트워크 공격
|공격기법|설명|
|------|---|
|패스워드 크래킹||
|IP 스푸핑|IP 어드레스로 위조하여 타깃에 전송하는 공격기법|
|ARP 스푸핑|MAC 주소를 자신의 MAC 주소로 위조|
|ICMP Redirect|3계층에서 스니핑 시스템을 네트워크에 존재하는 또 다른 라우터라고 알림으로써 패킷의 흐름을 바꾸는 공격기법|



#### 9. 버퍼 오버플로우 공격(시스템 보안 위협)
버퍼 크기를 초과하는 양의 데이터를 입력하여 이로 인해 프로세스의 흐름을 변경시켜서 악성 코드를 실행시키는 공격기법

- 버퍼 오버플로우 공격 유형

|공격기법|설명|
|------|---|
|스택 버퍼 오버플로우 공격|스택 영역에 할당된 버퍼 크기를 초과하는 양의 데이터를 입력하여 복귀 주소를 변경하고 공격자가 원하는 코드 실행시키는 공격 기법|
|힙 버퍼 오버플로우 공격|힙 영역에 할당된 버퍼 크기를 초과하는 데이터를 입력하여 메모리의 데이터와 함수 주소 등을 변경하고 공격자가 원하는 코드 실행시키는 공격 기법|

- 버퍼 오버플로우 공격 대응 방안 

|공격기법|설명|
|------|---|
|스택가드|카나리라고 불리는 무결성 체크용 값을 복귀 주소와 변수 사이에 삽입해 두고, 값이 변할 경우 복귀 주소를 호출하지 않는 방식으로 대응|
|스택쉴드|함수 시작 시 복귀 주소를 Global RET이라는 특수 스택에 저장해 두고, 함수 종료 시 저장된 값과 스택의 RET 값을 비교해서 다를 경우 오버플로우로 간주하고 프로그램 실행을 중단|
|ASLR|주소 공간 배치를 난수화하고, 실행 시마다 메모리 주소를 변경시켜 버퍼 오버플로우를 통한 특정 주소 호출을 차단|
|안전한 함수 사용||


#### 10. 보안관련 용어 

|공격기법|설명|
|------|---|
|스피어피싱|사회공학의 한 기법으로, 위장한 메일을 지속적으로 발송하여 첨부된 파일을 클릭하도록 유도하여 사용자의 개인정보 탈취|
|스미싱|문자메시지를 이용하여 기업이 보낸 것처럼 가장하여 휴대폰 소액 결제를 유도|
|큐싱|인증 등이 필요한 것처럼 속여 QR코드를 통해 악성 앱을 내려받도록 유도하여 금융 정보 등을 빼내는 피싱 공격|
|APT 공격|특정 타깃을 목표로 하여 다양한 수단을 통한 지속적이고 지능적인 맞춤형 공격기법|
|공급망 공격|배포 서버에 근접하여 악의적인 파일로 변경하는 방식을 통해 사용자 PC에 소프트웨어를 설치 또는 업데이트 시에 자동적으로 감염되도록 하는 공격기법|
|제로데이 공격|보안 취약점이 발견되어 널리 공표되기 전에 해당 취약점을 악용하여 이뤄지는 보안 공격기법|
|웜|스스로 복제하여 전파|
|악성 봇|스스로 실행되지 못하고, 해커의 명령에 의해 원격에서 제어 또는 실행이 가능한 프로그램|
|사이버 킬체인|7단계 APT 공격 방어 분석 모델|
|랜섬웨어|감염된 시스템의 파일들을 암호화하여 복호화할 수 없도록 하고 몸값을 요구 악성 프로그램|
|이블 트윈|합법적인 Wifi 제공자처럼 행세하며 핫스팟에 연결한 무선 사용자들의 정보를 탈취하는 무선 네트워크 공격기법|

#### 11. 인증 기술의 유형 (지소생특)

|유형|예시|
|------|---|
|지식기반 인증|ID, 패스워드|
|소지기반 인증|공인인증서, OTP|
|생체기반 인증|홍채, 지문|
|특징기반 인증|몸짓|

#### 12. 서버 접근 통제 우형 (댁 맥 알백)

|유형|설명|
|------|---|
|임의적 접근 통제(DAC)|신분 기반으로 제한|
|강제적 접근 통제(MAC)|허용등급을 기준으로 접근 허가 권한에 근거하여 시스템에 대한 접근을 제한|
|역할기반 접근 통제(RBAC)|조직내 맡은 역할에 기초하여 접근을 제한|

#### 13. 접근 통제 보호 모델 (벨기비무)

(1) 벨-라파듈라 모델 : 기밀성을 강조하며 강제적 정책
(2) 비바 모델 : 벨-라파듈라 모델의 단점을 보완한 무결성을 보장하는 모델

#### 14. 암호 알고리즘 방식 (9-17 참조)
(1) 양방향 방식
- 대칭키 암호 방식 : 암호화와 복호화에 같은 암호 키 사용
  - 블록 암호 방식
  - 스트림 암호 방식

- 비대칭 키 암호 방식


⋇ 암호 알고리즘 비교
|구분|대칭 키 암호 방식|비대칭 키 암호 방식|
|------|---|---|
|키|대칭 키(비밀키)|비대칭 키(공개키, 사설키)|
|키의 관계|암호화키 = 복호화키| 암호화키 ≠ 복호화키|
|장점|계산 속도가 빠름|암호화 키 사전 공유 불필요, 관리해야 할 키 개수가 적음|
|단점|키 분배 및 관리의 어려움|계산 속도 느림|
|알고리즘|DES, AES, SEED|RSA|

(2) 일방향 방식(해시 암호 방식)
임의 길이의 정보를 입력받아, 고정된 길이의 암호문을 출력하는 암호 방식
- 일방향 암호 종류 

|종류|설명|
|------|---|
|MAC|키를 사용하는 메시지 인증 코드로 메시지의 무결성과 인증 보장|
|MDC|키를 사용하지 않는 변경 감지 코드로 무결성 보장|

#### 15. 암호 알고리즘 상세
(1) 대칭 키 암호화 알고리즘
|종류|설명|
|------|---|
|DES|NIST에서 발표, 블록 암호화 알고리즘 <br> 블록 크기 : 64bit <br> 키 길이 : 56bit|
|SEED|한국인터넷진흥원이 개발한 블록 암호화 알고리즘 <br> 블록크키 : 128bit <br>키 길이에 따라 128bit, 256bit로 분류|
|AES|NIST에서 발표<br>AES의 라운드 수는 10, 12, 14라운드로 분류<br>4계층으로 구성|
|ARIA|학계(Academy), 연구기관(Research Institute), 정부(Agency)의 영문 앞글자로 구성|


(2) 비대칭 키 암호화 알고리즘
|종류|설명|
|------|---|
|디피-헬만|최초의 공개키 알고리즘, 두 사용자 간에 공통의 암호화 키를 안전하게 공유할 방법을 제시(최초의 비밀키 교환 프로토콜)|
|RSA|3명의 MIT 수학교수 이니셜, 소인수 분해 이용하는 공개키 암호화 알고리즘|
|ECC|타원곡선에서의 이산대수의 문제에 기초한 공개키 암호화 알고리즘|
|ElGamal|이산대수의 계산이 어려운 문제를 기본 원리로, RSA와 유사하게 전자서명과 데이터 암,복호화에 함께 사용 가능|

(3) 해시 암호화 알고리즘
|종류|설명|
|------|---|
|MD5|MD4를 개선한 암호화 알고리즘, 무결성 검사에 사용|
|SHA-1|NSA에서 미 정부 표준으로 지정, DSA에서 사용|
|SHA-256/384/512|AES의 키 길이인 128. 192,256 비트에 대응하도록 출력 길이를 늘인 해시 알고리즘|
|HAS-160|국내 표준 서명 알고리즘 KCDSA를 위해 개발된 해시함수|

#### 16. 안전한 전송을 위한 데이터 암호화 전송

(1) IPSec
IPSec는 IP 계층에서 무결성과 인증을 보장하는 인증 헤더와 기밀성을 보장하는 암호화를 이용한 IP 보안 프로토콜이다. 

(2) SSL/TLS
SSL/TLS는 전송계층과 응용계층 사이에서 클라이언트와 서버간의 기밀성, 무결성을 보장하는 보안 프로토콜이다. 

#### 17. SW 개발 보안 적용 사례
- Secure SDLC 모델 및 방법론

|종류|설명|
|------|---|
|Seven TouchPoints|검증된 개발 보안 방법론 중 하나로써 SW 보안의 모범 사례를 SDLC에 통합한 소프트웨어 개발 보안 생명주기 방법론|
|MS SDL|마이크로소프트사가 자사의 소프트웨어 개발에 의무적으로 적용하도록 고안한 보안강화 프레임워크|
|OWASP CLASP|개념 관점, 역할기반 관점, 활동평가 관점, 활동구현 관점, 취약성 관점 등의 활동중심, 역할기반의 프로세스로 구성된 보안 프레임워크로 이미 운영중인 시스템에 적용하기 쉬운 보안 개발방법론|


## 📚 CHAPTER2 소프트웨어 개발 보안 구현 

### ✍ 소프트웨어 개발 보안 구현

#### 1. 시큐어 코딩 가이드 (입보시에코캡아)
설계 및 구현 단계에서 보안 취약점을 사전에 제거 


|보안약점|내용|대응 방안|
|------|---|---|
|입력데이터 검증 및 표현|입력값에 대한 검증 누락, 부적절한 검증, 잘못된 형식 지정|입력데이터에 대한 유효성 검증체계를 수립|
|보안 기능|보안 기능의 부적절한 관리|직렬화|
|시간 및 상태|벙렬 시스템 환경에서 시간 및 상태의 부적절한 관리|직렬화|
|에러 처리|에러 미처리, 에러 메시지에 중요정보가 포함||
|코드 오류|코딩 오류||
|캡슐화|불충분한 캡슐화로 인해 인가되지 않은 사용자에게 데이터 누출|프라이빗 접근자 지정|
|API 오용|보안에 취약한 API 사용||

#### 2. 입력 데이터 검증 및 표현 취약점 
|취약점|설명|대책|
|------|---|---|
|XSS|검증되지 않은 외부 입력 데이터가 포함된 웹페이지가 전송되는 경우, 사용자가 웹페이지에 포함된 부적절한 스크립트가 실행되는 공격|HTML 태그 사용 금지(< 문자 사용시 &lt로 변환처리)|
|사이트 간 요청 위조(CSRF)|사용자가 자신의 의지와는 무관하게 공격자가 의도한 행위를 특정 웹사이트에 요청하게 하는 공격|GET 방식보다 POST 방식 사용, 세션별 CSRF 토큰을 사용, 중요기능의 경우 재인증|
|SQL 삽입|악의적인 SQL 구문 삽입, 실행시켜서 DB의 접근을 통해 정보를 탈취하거나 조작 등의 행위를 하는 공격 기법|바인딩 매개변수 방식을 적용해 사전에 변수 타입을 명시적으로 지정, 사용자로부터 입력될 수 있는 모든 값을 체크하여 필터링|

#### 3. XSS 공격 유형 (SR DOM)
|공격 유형|설명|
|------|---|
|Stored XSS|악성 스크립트가 포함된 페이지를 읽어 봄과 동시에 악성 스크립트가 브라우저에서 실행되면서 감염|
|Reflected XSS|이메일로 사용자에게 전송하면 사용자가 URL 클릭 시 즉시 공격 스크립트가 피해자로 반사|
|DOM|DOM기반 XSS 취약점이 있는 브라우저를 대상으로 조작된 URL을 이메일을 통해 발송하고 URL 클릭 시 공격 피해를 당하는 기법|

### ✍ 시스템 보안 구현

#### 1. 유닉스/리눅스 주요 로그 파일
유닉스 : /var/adm
리눅스 : /var/log

messages : 가장 기본적인 시스템 로그 파일로, 운영에 대한 전반적인 메시지를 저장

#### 2. 보안 솔루션 

(1) 네트워크 보안 솔루션 
|솔루션|설명|
|------|---|
|방화벽|트래픽을 모니터링 하여 시스템의 접근을 허용하거나 차단|
|웹 방화벽(WAF)|방화벽과는 달리 웹 애플리케이션 보안에 특화된 보안 장비|
|네트워크 접근 제어(NAC)|네트워크에 접속을 시도할 때 이를 제어하고 통제|
|침입 탐지 시스템(IDS)|이벤트를 모니터링하고 비인가 사용자에 의한 자원접근과 보안정책 위반 행위를 실시간으로 탐지|
|침입 방지 시스템(IPS)|공격이나 침입을 실시간적으로 차단하고, 유해 트래픽에 대한 조치를 능동적으로 처리|
|무선 침입 방지 시스템(WIPS)|무선 단말기의 접속을 자동으로 탐지 및 차단하고 보안에 취약한 무선 공유기를 탐지|
|통합 보안 시스템(UTM)|다양한 보안 장비의 기능을 하나의 장비로 통합하여 제공|
|가상사설망(VPN)|전용망을 사용하는 효과를 가지는 보안 솔루션|


(2) 시스템 보안 솔루션 
|솔루션|설명|
|------|---|
|스팸 차단 솔루션|메일 서버 앞단에 위치|
|보안 운영체제(Secure OS)|컴퓨터 운영체제의 커널에 보안 기능을 추가한 솔루션|

(3) 콘텐츠 유출 방지 솔루션 
|솔루션|설명|
|------|---|
|보안 USB|정보 유출 방지 등의 보안 기능을 갖춘 USB 메모리|
|데이터 유출 방지(DLP)|조직 내부의 중요 자료가 외부로 빠져나가는 것을 탐지하고 차단하는 솔루션|
|디지털 저작권 관리(DRM))|MP3,E-Book과 같은 디지털 저작물에 대한 보호와 관리를 위한 솔루션|


### ✍ SW 개발 보안 테스트와 결함 관리 

#### 1. 소프트웨어 개발 보안테스트의 유형

|구분|설명|특징|
|------|---|---|
|정적 분석|실행하지 않고 분석, 개발 단계에서 사용|초기 발견으로 수정비용 절감|
|동적 분석|실행환경에서 분석, 시험단계에서 사용|소스코드 필요 없음, 정확도 향상|

### ✍ 비지니스 연속성 계획(BCP)
#### 1. 비지니스 연속성 계획 개념 
비니지스 연속성 계획은 비지니스 연속성을 보장하는 체계이다.
비지니스 연속성 계획을 위한 비지니스 영향 평가가 선행되어야 한다. 

#### 2. 비지니스 연속성 계획 관련 주요 용어
|주요 용어|설명|
|------|---|
|BIA|영향도 및 손실평가를 조사하는 BCP를 구축하기 위한 비지니스 영향 분석|
|RTO|업무중단 시점부터 다시 가동될 때까지의 시간|
|PRO|업무중단 시점부터 다시 정상가동될 때 데이터의 손실 허용 시점|
|DRP|재난 복구 계획|
|DRS|재해복구센터|

#### 3. DRS의 유형 
|유형|설명|
|------|---|
|Mirror Site|주 센터와 데이터복구 센터 모두 운영 상태로 실시간 동시 서비스가 가능한 재해복구센터 <br> 복구까지의 소요시간(RTO)는 즉시(0)|
|Hot Site|주 센터와 동일한 수준의 자원을 대기 상태로 미러링을 통해 데이터의 최신 상태를 유지하고 있는 재해복구센터 RTO(4시간 이내)|
|Warm Site|Hot Site와 유사하나 중요성이 높은 자원만 부분적으로 재해복구센터에 보유하고 있는 센터, RTO(수일~수주)|
|Cold Site|데이터만 원격지에 보관하고, 재해 시 복구할 수 있는 재해복구센터, RTO(수주~수개월), 구축비용 저렴|

### ✍ 보안 중요 용어
#### 1. 보안 공격 관련 중요 용어

|주요 용어|설명|
|------|---|
|부 채널 공격|암호화 알고리즘의 실행 시기의 전력 소비 등의 물리적 특성을 측정하여 내부 비밀 정보를 부 채널에서 획득하는 공격기법|
|드라이브 바이 다운로드|웹 페이지에 악성 스크립트를 설치하고, 사용자 동의 없이 실행되어 의도된 서버로 연결하여 감염시킴|
|워터링홀|특정인에 대한 표적 공격을 목적으로 특정인이 잘 방문하는 웹 사이트에 악성코드를 심거나 URL로 자동으로 유인하여 감염시킴|
|스캠 공격|기엠 이메일 계정 도용하여 무역 거래 대금 가로채는 사이버 범죄|
|하트 블리드|하트비트의 취약점을 이용해 64kb 크기의 데이터를 아무런 제한 없이 탈취함|
|크라임웨어|중요한 금융정보 또는 인증정보를 탈취하거나 금전적인 이익 등의 범죄행위를 목적으로 하는 악성코드 |
|DNS 스푸핑 공격|정보를 조작하여 희생자가 의도하지 않은 주소로 접속하게 만드는 공격기법 <br> DNS 캐시 포이즈닝이라고 함|
|포트 스캐닝|침입 전 어떤 포트가 활성화되어 있는지 확인하는 기법으로 취약점을 분석하기 위한 사전 작업|
|디렉토리 리스팅|모든 디렉토리 및 파일 목록을 볼 수 있는 취약점|
|리버스쉘 공격|클라이언트가 타깃 서버의 쉘을 획득해서 공격|
|익스플로잇|공격자가 의도한 동작이나 명령을 실행하도록 하는 코드|
|스턱스넷 공격|독일 지멘스사의 SCADA 시스템을 공격목표로 주요 산업 기반 시설의 제어 시스템에 침투해서 오작도을 일으키는 악성코드 공격기법|
|크리덴셜 스터핑|다른 곳에서 유출된 아이디와 비밀번호 등의 로그인 정보를 다른 웹 사이트나 앱에 무작위로 대입해 로그인이 이뤄지면 타인의 정보를 유출시키는 기법|

#### 2. 보안 공격 대응 관련 중요 용어
|주요 용어|설명|
|------|---|
|부 채널 공격|암호화 알고리즘의 실행 시기의 전력 소비 등의 물리적 특성을 측정하여 내부 비밀 정보를 부 채널에서 획득하는 공격기법|
|드라이브 바이 다운로드|웹 페이지에 악성 스크립트를 설치하고, 사용자 동의 없이 실행되어 의도된 서버로 연결하여 감염시킴|
|워터링홀|특정인에 대한 표적 공격을 목적으로 특정인이 잘 방문하는 웹 사이트에 악성코드를 심거나 URL로 자동으로 유인하여 감염시킴|
|스캠 공격|기엠 이메일 계정 도용하여 무역 거래 대금 가로채는 사이버 범죄|
|하트 블리드|하트비트의 취약점을 이용해 64kb 크기의 데이터를 아무런 제한 없이 탈취함|
|크라임웨어|중요한 금융정보 또는 인증정보를 탈취하거나 금전적인 이익 등의 범죄행위를 목적으로 하는 악성코드 |